<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico" />
    <link rel="stylesheet" href="css/handsontable.full.min.css" />
    <link rel="stylesheet" href="libraries/chosen_v1.8.7/chosen.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style-zoomer.css">
    <link rel="stylesheet" href="css/svg.css">
    <link rel="stylesheet" href="css/tooltip.css">

    <script src="libraries/jquery-3.7.1.js"></script>
    <script src="libraries/chosen_v1.8.7/chosen.jquery.js"></script>
    <script src="libraries/handsontable.full.min.js" type="text/javascript"></script>
    <script src="libraries/chroma.js"></script>
    <script src="libraries/papaparse.js"></script>
    <script src="libraries/popper.js"></script>
    <!-- <script src="script/tooltip.js"></script> -->

    <title>HotMaps</title>
  </head>
  <body>
    <!-- TOOLTIP -->
    <div id="tooltip" role="tooltip">
      <div id="arrow" data-popper-arrow></div>
      <div id="tooltipcontent">
        <ul>
          <li> <span>CHP</span> <span>%34</span> </li>
          <li> <span>AKP</span> <span>%14</span> </li>
          <li> <span>MEMLEKET</span> <span>%98</span> </li>
        </ul>
      </div>
    </div>

    <div class="intro" style="font-family: Poppins">
      Create easy <span style="font-family: Poppins; font-weight: 100; font-size: xx-large">colorfull</span> maps...
    </div>

    <!-- User Interaction -->
    <div class="buttonGroup" style="display: flex; justify-content: left; gap: .4em; ">
      <!-- <input type="file" name="inputfile" id="inputfile" accept=".csv,.json" style="border:solid 1px red;"/> -->

      <!-- Fetch data from remote resource -->
      <!-- <span style="display:inline-block; padding: 0; margin: 0;">
        <input type="url" name="url" id="data-url" value="https://raw.githubusercontent.com/aakutlu/hotmaps/main/samplesheets/1995genelse%C3%A7imler.csv" style="margin-right: 0px; width: 30em;">
        <button id="fetch-data">Fetch</button>
      </span> -->


      <!-- Load from local saves -->
       <fieldset>
        <legend>Load Template</legend>
        <select id="select-local-storage" data-placeholder="Load from Local Saves" class="select" tabindex="1" style="width:20em;">
          <option value=""></option>
        </select>
       </fieldset>



      <!-- Select Map -->
      <fieldset>
        <legend>Map</legend>
        <select id="select-map" data-placeholder="Load Country Svg..." class="select" tabindex="1">
          <option value=""></option>
          <option value="world">World</option>
          <option value="africa">Africa</option>
          <option value="TR">Türkiye</option>
          <option value="TR-ilce">Türkiye | İlceler</option>
          <option value="TR-34">TR | İstanbul</option>
          <option value="USA">USA</option>
          <option value="usa-counties">USA | Counties</option>
          <option value="usa-ia">USA | Iowa</option>
          <option value="usa-nm">USA | New Mexico</option>
          <option value="USA-WDC">USA | Washington, DC</option>
          <option value="KKTC">Kıbrıs</option>
          <option value="AZ">Azerbaycan</option>
          <option value="GE">Gürcistan</option>
          <option value="XK">Kosova</option>
          <option value="IT">Italy</option>
          <option value="GR">Greece</option>
          <option value="HT">Haiti</option>
        </select>
      </fieldset>

      
      <!-- Select Strategy -->
      <fieldset>
        <legend>Coloring Method</legend>
        <select id="select-strategy" data-placeholder="Choose a Strategy..." class="select" tabindex="1">
          <option value=""></option>
          <option value="max">MaxValue</option>
          <option value="secondHighestValue">Second Highest Value</option>
          <option value="choropleth1">Choropleth1</option>
          <option value="choropleth2">Choropleth2</option>
          <option value="stringSimilarity">String Similarity</option>
        </select>
      </fieldset>


      <!-- Select Intervals -->
      <fieldset>
        <legend># of Intervals</legend>
        <select id="select-intervals" data-placeholder="# of Intervals..." class="select" tabindex="1">
          <option value=""></option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
        </select>
      </fieldset>

      <!-- Select Interval Mode -->
      <fieldset>
        <legend>Interval Mode</legend>
        <select id="select-intervalMode" data-placeholder="Interval Mode..." class="select" tabindex="1">
          <option value=""></option>
          <option value="e">equidistant (e)</option>
          <option value="q">quantile (q)</option>
          <option value="l">logarithmic (l)</option>
          <option value="k">k-means (k)</option>
        </select>
      </fieldset>

      <!-- Select Palette -->
      <fieldset>
        <legend>Custom Palette</legend>
        <select id="select-custom-palette" data-placeholder="Choose a Palette..." class="select" tabindex="1">
          <option value=""></option>
          <option value="none">None(use user defined)</option>
          <!-- <option value="YlGn">Brewer-YlGn</option>
          <option value="YlGnBu">Brewer-YlGnBu</option> -->
        </select>
      </fieldset>

      <span id="paletteSample">
        <span></span>
      </span>

<!--       <div>
        <label for="volume">classes</label><br/>
        <output id="value"></output><br/>
        <input type="range" id="palette-classes" name="volume" min="3" max="12" step="1" value="3" list="values" style="width: 10em;"/>
        <datalist id="values" style="width: 10em;">
          <option value="0" label="3"></option>
          <option value="100" label="12"></option>
        </datalist>
      </div> -->

<!--       <script>
        document.querySelector("#palette-classes").addEventListener("input", (event) => {
        document.querySelector("#value").textContent = event.target.value;
        });
      </script> -->
      
<!--       <div class="radios">
        <input type="radio" id="qwerty1" name="featuretitle" value="rowHeader" checked>
        <label for="qwerty1">CityName</label>
        <input type="radio" id="qwerty2" name="featuretitle" value="value">
        <label for="qwerty2">Value</label>
      </div> -->

    </div>
    <div class="">
      <button id="log">logTable</button>
      <button id="fill-random-data">Fill Random Integers</button>
      <button id="fill-random-strings">Fill Random Strings</button>
      <button id="update-system">updateSystem()</button>
    </div>

    <div id="legend-container" class="legend-container"></div>

    <div id="container" style="border: solid 1px black">
      <div id="handsontable-container">
        <div id="jtable" style="border: solid 1px black"></div>
      </div>
      <div id="map-container">
        <div id="svg-container"></div>
        <div class="download-image-btns">
          <img id="download-image-btn" src="img/download.svg" alt="download" title="Download as *.png">
        </div>
      </div>
    </div>
    <!-- Download Buttons -->
    <div id="downloadGroup" class="downloadGroup">
      <button id="downloadAsCSV">Download As CSV</button>
      <button id="downloadTemplate">Download Template CSV</button>
      <button id="saveToLocalStorage">Save To Browser's Local Storage</button>
    </div>

    <input type="color" name="color" id="color-picker" list="predefinedColors" value="#ffffff" style="position: absolute; visibility: hidden; z-index: -99" />
    <datalist id="predefinedColors">

      <option value="#67000d"></option>
      <option value="#a50f15"></option>
      <option value="#cb181d"></option>
      <option value="#ef3b2c"></option>
      <option value="#fb6a4a"></option>

      <option value="#6a6239"></option>
      <option value="#b5a03d"></option>
      <option value="#f7bd03"></option>
      <option value="#ffdd00"></option>
      <option value="#fff18d"></option>

      <option value="#00441b"></option>
      <option value="#006d2c"></option>
      <option value="#238b45"></option>
      <option value="#41ab5d"></option>
      <option value="#74c476"></option>

      <option value="#08306b"></option>
      <option value="#08519c"></option>
      <option value="#2171b5"></option>
      <option value="#4292c6"></option>
      <option value="#6baed6"></option>
      
      <option value="#3f007d"></option>
      <option value="#54278f"></option>
      <option value="#6a51a3"></option>
      <option value="#807dba"></option>
      <option value="#9e9ac8"></option>

    </datalist>
    <script>
      //when page load finished, load svg image
      window.addEventListener("load", async (event) => {
        rainbow();
        //setTooltipListeners();
      });

      function rainbow() {
        let span = document.querySelector(".intro span");
        let text = span.textContent;
        span.textContent = "";
        text.split("").forEach((elem) => {
          span.insertAdjacentHTML("beforeend", `<b style="color: ${chroma.random()}">${elem}</b>`);
        });
      }

    </script>
    <script type="module" src="./app.js"></script>
  </body>
</html>
